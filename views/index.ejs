<!DOCTYPE html>
<html>

<head>
  <title>
    <%= title %>
  </title>
  <link rel='stylesheet' href='/stylesheets/style.css' />
  <style>
    body {
      margin: 0;
      padding: 0;
    }
    canvas {
      background-image: url('//unpkg.com/three-globe/example/img/night-sky.png');
    }
  </style>
  <script src="//unpkg.com/three"></script>
  <script src="//unpkg.com/three/examples/js/controls/TrackballControls.js"></script>
  <script src="//unpkg.com/three-globe"></script>
</head>

<body>

  <div id="globeViz"></div>

  <script>

  // latest_global_inflation_list = [{ 'country': 'Austria', 'lat': 29.516230999999998, 'lng': 4.550072, 'inflation': 11.047, 'color': 'green' }, { 'country': 'Belgium', 'lat': 32.503887, 'lng': -5.530064, 'inflation': 10.629, 'color': 'green' }, { 'country': 'Brazil', 'lat': -32.235004, 'lng': -61.92528, 'inflation': 6.47, 'color': 'green' }, { 'country': 'Canada', 'lat': 38.130366, 'lng': -116.346771, 'inflation': 6.88, 'color': 'green' }, { 'country': 'Switzerland', 'lat': 28.818188, 'lng': -1.7724879999999992, 'inflation': 2.996, 'color': 'green' }, { 'country': 'Chile', 'lat': -53.675147, 'lng': -81.542969, 'inflation': 12.812, 'color': 'green' }, { 'country': 'China', 'lat': 17.86166, 'lng': 94.195397, 'inflation': 2.172, 'color': 'green' }, { 'country': 'Czech Republic', 'lat': 31.817492, 'lng': 5.472962000000001, 'inflation': 15.093, 'color': 'green' }, { 'country': 'Germany', 'lat': 33.165691, 'lng': 0.45152599999999943, 'inflation': 10.388, 'color': 'green' }, { 'country': 'Denmark', 'lat': 38.26392, 'lng': -0.4982150000000001, 'inflation': 10.112, 'color': 'green' }, { 'country': 'Estonia', 'lat': 40.595272, 'lng': 15.013607, 'inflation': 22.501, 'color': 'green' }, { 'country': 'Spain', 'lat': 22.463667, 'lng': -13.749220000000001, 'inflation': 7.265, 'color': 'green' }, { 'country': 'Finland', 'lat': 43.92411, 'lng': 15.748151, 'inflation': 8.311, 'color': 'green' }, { 'country': 'France', 'lat': 28.227638, 'lng': -7.786251, 'inflation': 6.2, 'color': 'green' }, { 'country': 'Greece', 'lat': 21.074208, 'lng': 11.824311999999999, 'inflation': 9.065, 'color': 'green' }, { 'country': 'Hungary', 'lat': 29.162494000000002, 'lng': 9.503304, 'inflation': 21.114, 'color': 'green' }, { 'country': 'Indonesia', 'lat': -18.789275, 'lng': 103.921327, 'inflation': 5.418, 'color': 'green' }, { 'country': 'Ireland', 'lat': 35.41291, 'lng': -18.24389, 'inflation': 9.16, 'color': 'green' }, { 'country': 'Israel', 'lat': 13.046050999999999, 'lng': 24.851612000000003, 'inflation': 5.078, 'color': 'green' }, { 'country': 'India', 'lat': 2.5936839999999997, 'lng': 68.96288, 'inflation': 6.085, 'color': 'green' }, { 'country': 'Iceland', 'lat': 46.96305099999999, 'lng': -29.020835, 'inflation': 9.333, 'color': 'green' }, { 'country': 'Italy', 'lat': 23.871940000000002, 'lng': 2.56738, 'inflation': 11.837, 'color': 'green' }, { 'country': 'Japan', 'lat': 18.204824000000002, 'lng': 128.252924, 'inflation': 3.804, 'color': 'green' }, { 'country': 'South Korea', 'lat': 17.907756999999997, 'lng': 117.766922, 'inflation': 5.67, 'color': 'green' }, { 'country': 'Luxembourg', 'lat': 31.815272999999998, 'lng': -3.8704169999999998, 'inflation': 6.854, 'color': 'green' }, { 'country': 'Mexico', 'lat': 5.634501, 'lng': -112.552784, 'inflation': 8.407, 'color': 'green' }, { 'country': 'Norway', 'lat': 42.472024, 'lng': -1.5310539999999992, 'inflation': 7.509, 'color': 'green' }, { 'country': 'Poland', 'lat': 33.919438, 'lng': 9.145136, 'inflation': 18.036, 'color': 'green' }, { 'country': 'Portugal', 'lat': 21.399872000000002, 'lng': -18.224454, 'inflation': 10.139, 'color': 'green' }, { 'country': 'Russia', 'lat': 43.52401, 'lng': 95.318756, 'inflation': 16.698, 'color': 'green' }, { 'country': 'Sweden', 'lat': 42.128161, 'lng': 8.643501, 'inflation': 10.853, 'color': 'green' }, { 'country': 'Slovenia', 'lat': 28.151241, 'lng': 4.995463000000001, 'inflation': 9.848, 'color': 'green' }, { 'country': 'Slovakia', 'lat': 30.669026000000002, 'lng': 9.699024000000001, 'inflation': 14.892, 'color': 'green' }, { 'country': 'Turkey', 'lat': 20.963745000000003, 'lng': 25.243322, 'inflation': 85.515, 'color': 'green' }, { 'country': 'United States', 'lat': 19.09024, 'lng': -105.712891, 'inflation': 7.745, 'color': 'green' }, { 'country': 'South Africa', 'lat': -48.559482, 'lng': 12.937505999999999, 'inflation': 7.778, 'color': 'green' }]
    latest_global_inflation_list = [{'country': 'Austria', 'lat': '47.516231', 'lng': '14.550072', 'inflation': 11.047, 'color': 'yellow'}, {'country': 'Belgium', 'lat': '50.503887', 'lng': '4.469936', 'inflation': 10.629, 'color': 'yellow'}, {'country': 'Brazil', 'lat': '-14.235004', 'lng': '-51.92528', 'inflation': 6.47, 'color': 'green'}, {'country': 'Canada', 'lat': '56.130366', 'lng': '-106.346771', 'inflation': 6.88, 'color': 'green'}, {'country': 'Switzerland', 'lat': '46.818188', 'lng': '8.227512', 'inflation': 2.996, 'color': 'blue'}, {'country': 'Chile', 'lat': '-35.675147', 'lng': '-71.542969', 'inflation': 12.812, 'color': 'yellow'}, {'country': 'China', 'lat': '35.86166', 'lng': '104.195397', 'inflation': 2.172, 'color': 'blue'}, {'country': 'Czech Republic', 'lat': '49.817492', 'lng': '15.472962', 'inflation': 15.093, 'color': 'darkorange'}, {'country': 'Germany', 'lat': '51.165691', 'lng': '10.451526', 'inflation': 10.388, 'color': 'yellow'}, {'country': 'Denmark', 'lat': '56.26392', 'lng': '9.501785', 'inflation': 10.112, 'color': 'yellow'}, {'country': 'Estonia', 'lat': '58.595272', 'lng': '25.013607', 'inflation': 22.501, 'color': 'red'}, {'country': 'Spain', 'lat': '40.463667', 'lng': '-3.74922', 'inflation': 7.265, 'color': 'green'}, {'country': 'Finland', 'lat': '61.92411', 'lng': '25.748151', 'inflation': 8.311, 'color': 'green'}, {'country': 'France', 'lat': '46.227638', 'lng': '2.213749', 'inflation': 6.2, 'color': 'green'}, {'country': 'Greece', 'lat': '39.074208', 'lng': '21.824312', 'inflation': 9.065, 'color': 'green'}, {'country': 'Hungary', 'lat': '47.162494', 'lng': '19.503304', 'inflation': 21.114, 'color': 'red'}, {'country': 'Indonesia', 'lat': '-0.789275', 'lng': '113.921327', 'inflation': 5.418, 'color': 'green'}, {'country': 'Ireland', 'lat': '53.41291', 'lng': '-8.24389', 'inflation': 9.16, 'color': 'green'}, {'country': 'Israel', 'lat': '31.046051', 'lng': '34.851612', 'inflation': 5.078, 'color': 'green'}, {'country': 'India', 'lat': '20.593684', 'lng': '78.96288', 'inflation': 6.085, 'color': 'green'}, {'country': 'Iceland', 'lat': '64.963051', 'lng': '-19.020835', 'inflation': 9.333, 'color': 'green'}, {'country': 'Italy', 'lat': '41.87194', 'lng': '12.56738', 'inflation': 11.837, 'color': 'yellow'}, {'country': 'Japan', 'lat': '36.204824', 'lng': '138.252924', 'inflation': 3.804, 'color': 'blue'}, {'country': 'South Korea', 'lat': '35.907757', 'lng': '127.766922', 'inflation': 5.67, 'color': 'green'}, {'country': 'Luxembourg', 'lat': '49.815273', 'lng': '6.129583', 'inflation': 6.854, 'color': 'green'}, {'country': 'Mexico', 'lat': '23.634501', 'lng': '-102.552784', 'inflation': 8.407, 'color': 'green'}, {'country': 'Norway', 'lat': '60.472024', 'lng': '8.468946', 'inflation': 7.509, 'color': 'green'}, {'country': 'Poland', 'lat': '51.919438', 'lng': '19.145136', 'inflation': 18.036, 'color': 'darkorange'}, {'country': 'Portugal', 'lat': '39.399872', 'lng': '-8.224454', 'inflation': 10.139, 'color': 'yellow'}, {'country': 'Russia', 'lat': '61.52401', 'lng': '105.318756', 'inflation': 16.698, 'color': 'darkorange'}, {'country': 'Sweden', 'lat': '60.128161', 'lng': '18.643501', 'inflation': 10.853, 'color': 'yellow'}, {'country': 'Slovenia', 'lat': '46.151241', 'lng': '14.995463', 'inflation': 9.848, 'color': 'green'}, {'country': 'Slovakia', 'lat': '48.669026', 'lng': '19.699024', 'inflation': 14.892, 'color': 'yellow'}, {'country': 'Turkey', 'lat': '38.963745', 'lng': '35.243322', 'inflation': 85.515, 'color': 'red'}, {'country': 'United States', 'lat': '37.09024', 'lng': '-95.712891', 'inflation': 7.745, 'color': 'green'}, {'country': 'South Africa', 'lat': '-30.559482', 'lng': '22.937506', 'inflation': 7.778, 'color': 'green'}];


    const Globe = new ThreeGlobe()
      .globeImageUrl('//unpkg.com/three-globe/example/img/earth-night.jpg')
      .bumpImageUrl('//unpkg.com/three-globe/example/img/earth-topology.png')
      .labelsData(latest_global_inflation_list)
      .labelText('country')
      .labelDotRadius(d => d.inflation * 0.04)
      .labelColor('color')
      

    // Setup renderer
    const renderer = new THREE.WebGLRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.getElementById('globeViz').appendChild(renderer.domElement);

    // Setup scene
    const scene = new THREE.Scene();
    scene.add(Globe);
    scene.add(new THREE.AmbientLight(0xbbbbbb));
    scene.add(new THREE.DirectionalLight(0xffffff, 0.6));

    // Setup camera
    const camera = new THREE.PerspectiveCamera();
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    camera.position.z = 500;

    // Add camera controls
    const tbControls = new THREE.TrackballControls(camera, renderer.domElement);
    tbControls.minDistance = 101;
    tbControls.rotateSpeed = 5;
    tbControls.zoomSpeed = 0.8;

    // Kick-off renderer
    (function animate()
    { // IIFE
      // Frame cycle
      tbControls.update();
      renderer.render(scene, camera);
      requestAnimationFrame(animate);
    })();
  </script>

</body>

</html>